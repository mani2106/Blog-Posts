<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Linear Algebra - d2l.ai Exercises - Part 3 | Manimaran Panneerselvam’s blog</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="Linear Algebra - d2l.ai Exercises - Part 3" />
<meta name="author" content="Manimaran Panneerselvam" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The third notebook in a series to be posted aiming to solve and understand exercises from d2l.ai curriculum on deep learning" />
<meta property="og:description" content="The third notebook in a series to be posted aiming to solve and understand exercises from d2l.ai curriculum on deep learning" />
<link rel="canonical" href="https://mani2106.github.io/Blog-Posts/d2l.ai-exercises/deep-learning/tensorflow/2021/02/09/d2lai-exercises-pt3.html" />
<meta property="og:url" content="https://mani2106.github.io/Blog-Posts/d2l.ai-exercises/deep-learning/tensorflow/2021/02/09/d2lai-exercises-pt3.html" />
<meta property="og:site_name" content="Manimaran Panneerselvam’s blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-02-09T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Linear Algebra - d2l.ai Exercises - Part 3" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Manimaran Panneerselvam"},"dateModified":"2021-02-09T00:00:00+00:00","datePublished":"2021-02-09T00:00:00+00:00","description":"The third notebook in a series to be posted aiming to solve and understand exercises from d2l.ai curriculum on deep learning","headline":"Linear Algebra - d2l.ai Exercises - Part 3","mainEntityOfPage":{"@type":"WebPage","@id":"https://mani2106.github.io/Blog-Posts/d2l.ai-exercises/deep-learning/tensorflow/2021/02/09/d2lai-exercises-pt3.html"},"url":"https://mani2106.github.io/Blog-Posts/d2l.ai-exercises/deep-learning/tensorflow/2021/02/09/d2lai-exercises-pt3.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/Blog-Posts/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://mani2106.github.io/Blog-Posts/feed.xml" title="Manimaran Panneerselvam&apos;s blog" /><!-- the google_analytics_id gets auto inserted from the config file -->



<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-168240544-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-168240544-1');
</script>


<link rel="shortcut icon" type="image/x-icon" href="/Blog-Posts/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>

<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

<style>
.post-container {
  display: flex;
  position: relative;
}

.toc-sidebar {
  position: fixed;
  right: 20px;
  top: 20px;
  width: 250px;
  max-height: calc(100vh - 40px);
  overflow-y: auto;
  background: #f6f8fa;
  border: 1px solid #d0d7de;
  border-radius: 6px;
  padding: 16px;
  z-index: 100;
  box-shadow: 0 1px 3px rgba(27, 31, 36, 0.1);
  font-size: 14px;
}

.toc-sidebar h2 {
  font-size: 16px;
  margin-top: 0;
  color: #24292f;
}

.toc-sidebar ul {
  list-style: none;
  padding-left: 0;
}

.toc-sidebar li {
  margin: 4px 0;
}

.toc-sidebar a {
  color: #0969da;
  text-decoration: none;
}

.toc-sidebar a:hover {
  text-decoration: underline;
}

.post-main {
  margin-right: 280px;
  flex: 1;
  max-width: calc(100% - 280px);
}

@media (max-width: 768px) {
  .toc-sidebar {
    display: none;
  }
  .post-main {
    margin-right: 0;
    max-width: 100%;
  }
}
</style>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/Blog-Posts/">Manimaran Panneerselvam&#39;s blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/Blog-Posts/about/">About Me</a><a class="page-link" href="/Blog-Posts/search/">Search</a><a class="page-link" href="/Blog-Posts/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Linear Algebra - d2l.ai Exercises - Part 3</h1><p class="page-description">The third notebook in a series to be posted aiming to solve and understand exercises from d2l.ai curriculum on deep learning</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2021-02-09T00:00:00+00:00" itemprop="datePublished">
        Feb 9, 2021
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      11 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i>
      
        <a class="category-tags-link" href="/Blog-Posts/categories/#d2l.ai-exercises">d2l.ai-exercises</a>
        &nbsp;
      
        <a class="category-tags-link" href="/Blog-Posts/categories/#deep-learning">deep-learning</a>
        &nbsp;
      
        <a class="category-tags-link" href="/Blog-Posts/categories/#tensorflow">tensorflow</a>
        
      
      </p>
    

    
      
        <div class="pb-5 d-flex flex-wrap flex-justify-end">
          <div class="px-2">

    <a href="https://github.com/mani2106/Blog-Posts/tree/master/_notebooks/2021-02-09-d2lai-exercises-pt3.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/Blog-Posts/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          <div class="px-2">
    <a href="https://mybinder.org/v2/gh/mani2106/Blog-Posts/master?filepath=_notebooks%2F2021-02-09-d2lai-exercises-pt3.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/Blog-Posts/assets/badges/binder.svg" alt="Open In Binder"/>
    </a>
</div>

          <div class="px-2">
    <a href="https://colab.research.google.com/github/mani2106/Blog-Posts/blob/master/_notebooks/2021-02-09-d2lai-exercises-pt3.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/Blog-Posts/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
        </div>
      </header>

  <div class="post-container">
    <aside class="toc-sidebar">
      <!-- Enhanced Table of Contents with proper semantic HTML structure and accessibility -->
<div class="toc-container" role="complementary" aria-labelledby="toc-heading">
  <div class="toc-header">
    <h4 id="toc-heading" class="toc-title">Table of Contents</h4>
  </div>
  <nav class="toc-nav" aria-label="Table of Contents">
    <div id="toc" role="navigation"></div>
  </nav>
</div>

<script>
    // Performance optimization: Debounce utility for scroll handlers (Requirement 3.4)
    function debounce(func, wait, immediate) {
      var timeout;
      return function executedFunction() {
        var context = this;
        var args = arguments;
        var later = function() {
          timeout = null;
          if (!immediate) func.apply(context, args);
        };
        var callNow = immediate && !timeout;
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
        if (callNow) func.apply(context, args);
      };
    }

    // Performance optimization: Throttle utility for high-frequency events
    function throttle(func, limit) {
      var inThrottle;
      return function() {
        var args = arguments;
        var context = this;
        if (!inThrottle) {
          func.apply(context, args);
          inThrottle = true;
          setTimeout(function() { inThrottle = false; }, limit);
        }
      };
    }

    // Performance optimization: RequestAnimationFrame polyfill for smooth animations
    (function() {
      var lastTime = 0;
      var vendors = ['ms', 'moz', 'webkit', 'o'];
      for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];
        window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] ||
                                      window[vendors[x] + 'CancelRequestAnimationFrame'];
      }

      if (!window.requestAnimationFrame) {
        window.requestAnimationFrame = function(callback, element) {
          var currTime = new Date().getTime();
          var timeToCall = Math.max(0, 16 - (currTime - lastTime));
          var id = window.setTimeout(function() { callback(currTime + timeToCall); }, timeToCall);
          lastTime = currTime + timeToCall;
          return id;
        };
      }

      if (!window.cancelAnimationFrame) {
        window.cancelAnimationFrame = function(id) {
          clearTimeout(id);
        };
      }
    })();

    // Enhanced feature detection with polyfill support (Requirement 5.2)
    var features = {
      jquery: typeof jQuery !== 'undefined',
      cssGrid: (function() {
        try {
          return CSS && CSS.supports && CSS.supports('display', 'grid');
        } catch (e) {
          return false;
        }
      })(),
      stickyPosition: (function() {
        try {
          return CSS && CSS.supports && (
            CSS.supports('position', 'sticky') ||
            CSS.supports('position', '-webkit-sticky')
          );
        } catch (e) {
          return false;
        }
      })(),
      intersectionObserver: (function() {
        try {
          return 'IntersectionObserver' in window &&
                 typeof IntersectionObserver === 'function';
        } catch (e) {
          return false;
        }
      })(),
      smoothScroll: (function() {
        try {
          return 'scrollBehavior' in document.documentElement.style;
        } catch (e) {
          return false;
        }
      })(),
      // Additional performance-related feature detection
      passiveEvents: (function() {
        try {
          var opts = Object.defineProperty({}, 'passive', {
            get: function() {
              return true;
            }
          });
          window.addEventListener('testPassive', null, opts);
          window.removeEventListener('testPassive', null, opts);
          return true;
        } catch (e) {
          return false;
        }
      })(),
      requestAnimationFrame: typeof window.requestAnimationFrame === 'function'
    };

    // Log feature support for debugging
    console.log('TOC Feature Support:', features);

    // Apply graceful degradation classes based on feature support (Requirement 5.3)
    function applyFeatureDegradation() {
      var tocContainer = document.querySelector('.toc-container');
      if (!tocContainer) return;

      // Add classes for CSS to handle graceful degradation
      if (!features.cssGrid) {
        tocContainer.classList.add('no-css-grid');
      }
      if (!features.stickyPosition) {
        tocContainer.classList.add('no-sticky-position');
      }
      if (!features.intersectionObserver) {
        tocContainer.classList.add('no-intersection-observer');
      }
    }

    // Fallback TOC generation if jQuery plugin fails (Requirement 5.1)
    function generateFallbackTOC() {
      try {
        var headers = document.querySelectorAll('h2, h3, h4, h5, h6');

        // Hide TOC if fewer than 2 headers (Requirement 1.4)
        if (headers.length < 2) {
          hideTOCContainer();
          return false;
        }

        var tocContainer = document.getElementById('toc');
        if (!tocContainer) {
          console.warn('TOC container not found');
          return false;
        }

        // Clear existing content
        tocContainer.innerHTML = '';

        // Generate TOC structure
        var tocList = document.createElement('ul');
        var currentLevel = 2;
        var levelStack = [tocList];

        headers.forEach(function(header, index) {
          // Ensure header has an ID
          if (!header.id) {
            header.id = 'toc-header-' + index;
          }

          var level = parseInt(header.tagName.charAt(1));
          var listItem = document.createElement('li');
          var link = document.createElement('a');

          link.href = '#' + header.id;
          link.textContent = header.textContent || header.innerText;
          link.setAttribute('data-level', level);

          // Handle nested levels
          if (level > currentLevel) {
            // Create nested list
            var nestedList = document.createElement('ul');
            var lastItem = levelStack[levelStack.length - 1].lastElementChild;
            if (lastItem) {
              lastItem.appendChild(nestedList);
            }
            levelStack.push(nestedList);
            currentLevel = level;
          } else if (level < currentLevel) {
            // Go back to appropriate level
            while (levelStack.length > 1 && level < currentLevel) {
              levelStack.pop();
              currentLevel--;
            }
          }

          listItem.appendChild(link);
          levelStack[levelStack.length - 1].appendChild(listItem);
        });

        tocContainer.appendChild(tocList);

        // Add click handlers for smooth scrolling
        addFallbackScrollHandlers();

        console.log('Fallback TOC generated successfully');
        return true;
      } catch (error) {
        console.error('Fallback TOC generation failed:', error);
        hideTOCContainer();
        return false;
      }
    }

    // Add smooth scrolling handlers for fallback TOC (Requirement 5.1)
    function addFallbackScrollHandlers() {
      var tocLinks = document.querySelectorAll('#toc a');

      tocLinks.forEach(function(link) {
        // Create named handler for cleanup
        var clickHandler = function(e) {
          try {
            e.preventDefault();

            var targetId = this.getAttribute('href').substring(1);
            var target = document.getElementById(targetId);

            if (target) {
              var offset = 32; // Account for sticky headers
              var targetPosition = target.offsetTop - offset;

              // Use smooth scroll if supported, otherwise fallback to instant scroll
              if (features.smoothScroll) {
                window.scrollTo({
                  top: targetPosition,
                  behavior: 'smooth'
                });
              } else {
                window.scrollTo(0, targetPosition);
              }
            }
          } catch (scrollError) {
            console.warn('Error in fallback scroll handler:', scrollError);
            // Allow default browser behavior as fallback
            return true;
          }
          return false;
        };

        // Store handler reference for cleanup
        link._tocClickHandler = clickHandler;
        link.addEventListener('click', clickHandler);
      });
    }

    // Hide TOC container when not needed (Requirement 1.4)
    function hideTOCContainer() {
      var tocContainer = document.querySelector('.toc-container');
      if (tocContainer) {
        tocContainer.style.display = 'none';
      }
    }

    // Show TOC container with loading state management
    function showTOCContainer() {
      var tocContainer = document.querySelector('.toc-container');
      if (tocContainer) {
        tocContainer.style.display = 'block';
        // Remove loading state if present
        tocContainer.classList.remove('toc-loading');
        tocContainer.classList.add('toc-loaded');
      }
    }

    // Add loading state to TOC container
    function showTOCLoading() {
      var tocContainer = document.querySelector('.toc-container');
      if (tocContainer) {
        tocContainer.classList.add('toc-loading');
        tocContainer.classList.remove('toc-loaded');

        // Add loading indicator
        var tocContent = document.getElementById('toc');
        if (tocContent) {
          tocContent.innerHTML = '<div class="toc-loading-indicator">' +
            '<div class="toc-spinner"></div>' +
            '<span>Generating table of contents...</span>' +
            '</div>';
        }
      }
    }

    // Performance optimization: Batch DOM operations for faster TOC generation
    function batchDOMOperations(operations) {
      if (features.requestAnimationFrame) {
        return new Promise(function(resolve) {
          requestAnimationFrame(function() {
            operations();
            resolve();
          });
        });
      } else {
        // Fallback for browsers without requestAnimationFrame
        return new Promise(function(resolve) {
          setTimeout(function() {
            operations();
            resolve();
          }, 0);
        });
      }
    }

    // Error recovery and cleanup utilities (Requirement 5.1)
    var tocErrorCount = 0;
    var maxRetries = 3;

    function handleTOCError(error, context) {
      tocErrorCount++;
      console.error('TOC Error in ' + context + ':', error);

      if (tocErrorCount >= maxRetries) {
        console.error('TOC initialization failed after ' + maxRetries + ' attempts, disabling TOC');
        hideTOCContainer();
        return false;
      }

      return true;
    }

    // Cross-browser compatibility: Array.from polyfill for IE11
    if (!Array.from) {
      Array.from = function(arrayLike) {
        var result = [];
        for (var i = 0; i < arrayLike.length; i++) {
          result.push(arrayLike[i]);
        }
        return result;
      };
    }

    // Cross-browser compatibility: forEach polyfill for NodeList in IE11
    if (window.NodeList && !NodeList.prototype.forEach) {
      NodeList.prototype.forEach = function(callback, thisArg) {
        thisArg = thisArg || window;
        for (var i = 0; i < this.length; i++) {
          callback.call(thisArg, this[i], i, this);
        }
      };
    }

    // Cross-browser compatibility: Object.assign polyfill for IE11
    if (typeof Object.assign !== 'function') {
      Object.assign = function(target) {
        if (target == null) {
          throw new TypeError('Cannot convert undefined or null to object');
        }
        var to = Object(target);
        for (var index = 1; index < arguments.length; index++) {
          var nextSource = arguments[index];
          if (nextSource != null) {
            for (var nextKey in nextSource) {
              if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {
                to[nextKey] = nextSource[nextKey];
              }
            }
          }
        }
        return to;
      };
    }

    // Enhanced cleanup function for memory management and performance
    function cleanupTOC() {
      try {
        // Performance optimization: Cancel any pending animation frames
        if (window.tocAnimationFrame) {
          cancelAnimationFrame(window.tocAnimationFrame);
          window.tocAnimationFrame = null;
        }

        // Remove event listeners to prevent memory leaks
        var tocLinks = document.querySelectorAll('#toc a');
        tocLinks.forEach(function(link) {
          if (link._tocClickHandler) {
            link.removeEventListener('click', link._tocClickHandler);
            delete link._tocClickHandler;
          }
        });

        // Clear any active observers
        if (window.tocObserver) {
          window.tocObserver.disconnect();
          window.tocObserver = null;
        }

        // Clear timeouts and intervals
        if (window.tocScrollTimeout) {
          clearTimeout(window.tocScrollTimeout);
          window.tocScrollTimeout = null;
        }
        if (window.tocResizeTimeout) {
          clearTimeout(window.tocResizeTimeout);
          window.tocResizeTimeout = null;
        }

        // Clear performance monitoring
        if (window.tocPerformanceStart) {
          window.tocPerformanceStart = null;
        }

        console.log('TOC cleanup completed');
      } catch (cleanupError) {
        console.warn('Error during TOC cleanup:', cleanupError);
      }
    }

    // Main TOC initialization with comprehensive error handling and performance optimization
    function initializeTOC() {
      try {
        // Performance optimization: Show loading state immediately
        showTOCLoading();

        // Clean up any previous initialization
        cleanupTOC();

        // Apply feature degradation classes first
        applyFeatureDegradation();

        // Performance optimization: Use requestAnimationFrame for non-blocking execution
        return batchDOMOperations(function() {
          // Check if we have enough headers (Requirement 1.4)
          var headers = document.querySelectorAll('h2, h3, h4, h5, h6');
          if (headers.length < 2) {
            console.log('TOC hidden: fewer than 2 headers found (' + headers.length + ')');
            hideTOCContainer();
            return;
          }

          console.log('Initializing TOC with ' + headers.length + ' headers');

          // Performance monitoring: Track TOC generation time
          window.tocPerformanceStart = performance && performance.now ? performance.now() : Date.now();

          var tocGenerated = false;

        // Try jQuery TOC plugin first if available
        if (features.jquery && typeof $ !== 'undefined' && $.fn && typeof $.fn.toc === 'function') {
          try {
            $('#toc').toc({
              minimumHeaders: 2,
              listType: 'ul',
              showSpeed: 0,
              headers: 'h2,h3,h4,h5,h6'
            });

            // Check if TOC was actually generated
            var tocContent = document.querySelector('#toc ul');
            if (tocContent && tocContent.children.length > 0) {
              tocGenerated = true;
              console.log('jQuery TOC plugin initialized successfully');

              // Enhanced smooth scrolling with proper offset calculation (Requirements 3.2, 3.3)
              $('#toc').on('click', 'a', function(e) {
                try {
                  e.preventDefault();
                  var target = $(this.getAttribute('href'));

                  if (target.length) {
                    var scroll_target = target.offset().top;
                    var offset = 32; // 2rem equivalent for sticky positioning

                    if (features.smoothScroll) {
                      $('html, body').animate({
                        scrollTop: scroll_target - offset
                      }, 300, 'swing');
                    } else {
                      // Fallback for browsers without smooth scroll
                      $('html, body').scrollTop(scroll_target - offset);
                    }
                  }
                } catch (scrollError) {
                  console.warn('Error in jQuery scroll handler:', scrollError);
                  // Fallback to browser default behavior
                  return true;
                }
                return false;
              });
            } else {
              console.warn('jQuery TOC plugin did not generate content');
            }
          } catch (jqueryError) {
            if (!handleTOCError(jqueryError, 'jQuery TOC plugin')) return;
          }
        } else {
          console.log('jQuery TOC plugin not available, using fallback');
        }

        // Fallback to vanilla JavaScript TOC generation if jQuery failed (Requirement 5.1)
        if (!tocGenerated) {
          console.log('Falling back to vanilla JavaScript TOC generation');
          try {
            tocGenerated = generateFallbackTOC();
          } catch (fallbackError) {
            if (!handleTOCError(fallbackError, 'fallback TOC generation')) return;
          }
        }

          if (tocGenerated) {
            try {
              // Initialize active section highlighting if supported (Requirements 3.1, 3.4)
              initializeActiveHighlighting();
              showTOCContainer();

              // Performance monitoring: Log completion time
              if (window.tocPerformanceStart) {
                var endTime = performance && performance.now ? performance.now() : Date.now();
                var duration = endTime - window.tocPerformanceStart;
                console.log('TOC initialization completed in ' + duration.toFixed(2) + 'ms');

                // Performance validation: Warn if TOC generation is slow (Requirement 3.4)
                if (duration > 50) {
                  console.warn('TOC generation took longer than expected (' + duration.toFixed(2) + 'ms). Consider optimizing for better performance.');
                }
              }

              // Validate final implementation against requirements
              validateTOCImplementation();

            } catch (highlightError) {
              // Active highlighting is optional, don't fail the entire TOC
              console.warn('Active highlighting failed, but TOC is still functional:', highlightError);
              showTOCContainer();
            }
          } else {
            console.warn('TOC generation failed, hiding container');
            hideTOCContainer();
          }
        }).catch(function(batchError) {
          console.error('Error in batched TOC operations:', batchError);
          hideTOCContainer();
        });

      } catch (error) {
        handleTOCError(error, 'main initialization');
      }
    }

    // Cleanup on page unload to prevent memory leaks
    window.addEventListener('beforeunload', cleanupTOC);

    // Validate final implementation against all requirements
    function validateTOCImplementation() {
      try {
        var validationResults = {
          requirement1_1: false, // TOC displays in right sidebar
          requirement1_2: false, // TOC remains sticky during scroll
          requirement1_3: false, // TOC hidden on mobile/tablet
          requirement1_4: false, // TOC hidden when fewer than 2 headers
          requirement3_1: false, // Active section highlighting
          requirement3_4: false, // Smooth scrolling with proper performance
          requirement4_1: false, // Consistent typography and colors
          requirement6_4: false  // Responsive behavior
        };

        // Check Requirement 1.1: TOC displays in right sidebar
        var tocSidebar = document.querySelector('.toc-sidebar');
        var tocContainer = document.querySelector('.toc-container');
        if (tocSidebar && tocContainer && tocContainer.style.display !== 'none') {
          validationResults.requirement1_1 = true;
        }

        // Check Requirement 1.2: Sticky positioning
        if (features.stickyPosition) {
          var stickyStyle = window.getComputedStyle(tocSidebar);
          if (stickyStyle.position === 'sticky' || stickyStyle.position === '-webkit-sticky') {
            validationResults.requirement1_2 = true;
          }
        } else {
          // Graceful degradation is acceptable
          validationResults.requirement1_2 = true;
        }

        // Check Requirement 1.3: Responsive behavior
        var mediaQuery = window.matchMedia('(max-width: 1024px)');
        if (mediaQuery.matches) {
          var tocDisplay = window.getComputedStyle(tocSidebar).display;
          if (tocDisplay === 'none') {
            validationResults.requirement1_3 = true;
          }
        } else {
          validationResults.requirement1_3 = true; // Not on mobile, so requirement is met
        }

        // Check Requirement 1.4: Hidden when fewer than 2 headers
        var headers = document.querySelectorAll('h2, h3, h4, h5, h6');
        if (headers.length >= 2) {
          validationResults.requirement1_4 = true; // TOC should be visible
        } else {
          // TOC should be hidden
          if (tocContainer && tocContainer.style.display === 'none') {
            validationResults.requirement1_4 = true;
          }
        }

        // Check Requirement 3.1: Active section highlighting
        var tocLinks = document.querySelectorAll('#toc a');
        var hasActiveClass = false;
        tocLinks.forEach(function(link) {
          if (link.classList.contains('toc-active')) {
            hasActiveClass = true;
          }
        });
        if (features.intersectionObserver || hasActiveClass) {
          validationResults.requirement3_1 = true;
        }

        // Check Requirement 3.4: Performance (scroll handlers are throttled)
        if (window.tocObserver || (window.addEventListener.toString().indexOf('throttle') > -1)) {
          validationResults.requirement3_4 = true;
        }

        // Check Requirement 4.1: Typography and colors
        if (tocContainer) {
          var containerStyles = window.getComputedStyle(tocContainer);
          if (containerStyles.fontFamily && containerStyles.color) {
            validationResults.requirement4_1 = true;
          }
        }

        // Check Requirement 6.4: Responsive adaptation
        validationResults.requirement6_4 = validationResults.requirement1_3;

        // Log validation results
        var passedCount = 0;
        var totalCount = 0;
        for (var req in validationResults) {
          totalCount++;
          if (validationResults[req]) {
            passedCount++;
          } else {
            console.warn('Requirement validation failed:', req);
          }
        }

        console.log('TOC Requirements Validation: ' + passedCount + '/' + totalCount + ' requirements met');

        if (passedCount === totalCount) {
          console.log('✅ All TOC requirements successfully validated');
        } else {
          console.warn('⚠️ Some TOC requirements not fully met - check console for details');
        }

        return validationResults;
      } catch (validationError) {
        console.error('Error during TOC validation:', validationError);
        return null;
      }
    }

    // Cross-browser compatibility: Performance monitoring fallback
    if (!window.performance || !window.performance.now) {
      window.performance = {
        now: function() {
          return Date.now();
        }
      };
    }

    // Initialize when DOM is ready with error handling
    function initializeTOCWhenReady() {
      try {
        if (features.jquery && typeof $ !== 'undefined') {
          $(document).ready(function() {
            setTimeout(initializeTOC, 0); // Non-blocking initialization
          });
        } else {
          // Fallback for when jQuery is not available
          if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
              setTimeout(initializeTOC, 0); // Non-blocking initialization
            });
          } else {
            setTimeout(initializeTOC, 0); // Non-blocking initialization
          }
        }
      } catch (initError) {
        console.error('Error setting up TOC initialization:', initError);
        // Fallback: try direct initialization
        setTimeout(function() {
          try {
            initializeTOC();
          } catch (fallbackError) {
            console.error('TOC fallback initialization also failed:', fallbackError);
          }
        }, 100);
      }
    }

    // Start initialization
    initializeTOCWhenReady();

    // Active section highlighting using Intersection Observer API (Requirement 3.1)
    function initializeActiveHighlighting() {
      try {
        // Check if Intersection Observer is supported (Requirement 5.2)
        if (!features.intersectionObserver) {
          console.warn('Intersection Observer not supported, using fallback scroll-based highlighting');
          initializeFallbackHighlighting();
          return;
        }

        var headers = document.querySelectorAll('h2, h3, h4, h5, h6');
        var tocLinks = document.querySelectorAll('#toc a');
        var activeClass = 'toc-active';

        if (headers.length === 0 || tocLinks.length === 0) {
          console.log('No headers or TOC links found for active highlighting');
          return;
        }

        // Create a map of header IDs to TOC links for efficient lookup
        var headerToLinkMap = {};
        tocLinks.forEach(function(link) {
          try {
            var href = link.getAttribute('href');
            if (href && href.startsWith('#')) {
              var headerId = href.substring(1);
              headerToLinkMap[headerId] = link;
            }
          } catch (linkError) {
            console.warn('Error processing TOC link:', linkError);
          }
        });

        // Intersection Observer configuration (Requirement 3.4)
        var observerOptions = {
          // Trigger when section is in the middle portion of viewport
          rootMargin: '-20% 0px -35% 0px',
          threshold: 0
        };

        // Track currently active section
        var currentActiveLink = null;

        // Intersection Observer callback (Requirement 3.1, 3.4)
        window.tocObserver = new IntersectionObserver(function(entries) {
          try {
            var visibleHeaders = [];

            // Collect all visible headers
            entries.forEach(function(entry) {
              if (entry.isIntersecting) {
                visibleHeaders.push({
                  element: entry.target,
                  ratio: entry.intersectionRatio,
                  top: entry.boundingClientRect.top
                });
              }
            });

            // Sort by position in viewport (topmost first)
            visibleHeaders.sort(function(a, b) {
              return a.top - b.top;
            });

            // Clear previous active state
            if (currentActiveLink) {
              currentActiveLink.classList.remove(activeClass);
              currentActiveLink = null;
            }

            // Set new active state for the topmost visible header (Requirement 3.4)
            if (visibleHeaders.length > 0) {
              var activeHeader = visibleHeaders[0].element;
              var activeLink = headerToLinkMap[activeHeader.id];

              if (activeLink) {
                activeLink.classList.add(activeClass);
                currentActiveLink = activeLink;
              }
            }
          } catch (observerError) {
            console.error('Error in Intersection Observer callback:', observerError);
          }
        }, observerOptions);

        // Start observing all headers (Requirement 3.1)
        headers.forEach(function(header, index) {
          try {
            // Ensure header has an ID for linking
            if (!header.id) {
              // Generate ID if missing (fallback)
              header.id = 'toc-header-' + index;
            }
            window.tocObserver.observe(header);
          } catch (headerError) {
            console.warn('Error observing header:', headerError);
          }
        });

        // Handle edge case: highlight first section when at top of page
        function handleScrollTop() {
          try {
            if (window.pageYOffset < 100 && tocLinks.length > 0) {
              // Clear all active states
              tocLinks.forEach(function(link) {
                link.classList.remove(activeClass);
              });

              // Activate first link
              tocLinks[0].classList.add(activeClass);
              currentActiveLink = tocLinks[0];
            }
          } catch (scrollError) {
            console.warn('Error in scroll top handler:', scrollError);
          }
        }

        // Optimized scroll handler with throttling for 60fps performance (Requirement 3.4)
        var optimizedScrollHandler = throttle(handleScrollTop, 16); // ~60fps
        var eventOptions = features.passiveEvents ? { passive: true } : false;

        window.addEventListener('scroll', optimizedScrollHandler, eventOptions);

        // Initial check
        handleScrollTop();

        console.log('Intersection Observer active highlighting initialized');

      } catch (error) {
        console.error('Error initializing active highlighting:', error);
        // Fallback to scroll-based highlighting
        initializeFallbackHighlighting();
      }
    }

    // Fallback active highlighting for browsers without Intersection Observer (Requirement 5.2, 5.3)
    function initializeFallbackHighlighting() {
      try {
        var headers = document.querySelectorAll('h2, h3, h4, h5, h6');
        var tocLinks = document.querySelectorAll('#toc a');
        var activeClass = 'toc-active';

        if (headers.length === 0 || tocLinks.length === 0) {
          return;
        }

        // Create header position cache for performance
        var headerPositions = [];

        function updateHeaderPositions() {
          headerPositions = Array.from(headers).map(function(header) {
            return {
              element: header,
              top: header.offsetTop,
              id: header.id
            };
          });
        }

        // Create header ID to link mapping
        var headerToLinkMap = {};
        tocLinks.forEach(function(link) {
          var href = link.getAttribute('href');
          if (href && href.startsWith('#')) {
            var headerId = href.substring(1);
            headerToLinkMap[headerId] = link;
          }
        });

        // Scroll-based active highlighting
        function updateActiveSection() {
          try {
            var scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            var currentActive = null;

            // Find the current section based on scroll position
            for (var i = headerPositions.length - 1; i >= 0; i--) {
              if (scrollTop >= headerPositions[i].top - 100) {
                currentActive = headerPositions[i];
                break;
              }
            }

            // Clear all active states
            tocLinks.forEach(function(link) {
              link.classList.remove(activeClass);
            });

            // Set active state
            if (currentActive && headerToLinkMap[currentActive.id]) {
              headerToLinkMap[currentActive.id].classList.add(activeClass);
            } else if (tocLinks.length > 0 && scrollTop < 100) {
              // Activate first link when at top
              tocLinks[0].classList.add(activeClass);
            }
          } catch (updateError) {
            console.warn('Error updating active section:', updateError);
          }
        }

        // Initialize header positions
        updateHeaderPositions();

        // Optimized scroll handler with throttling for 60fps performance (Requirement 3.4)
        var optimizedScrollHandler = throttle(updateActiveSection, 16); // ~60fps
        var eventOptions = features.passiveEvents ? { passive: true } : false;

        window.addEventListener('scroll', optimizedScrollHandler, eventOptions);

        // Optimized resize handler with debouncing
        var optimizedResizeHandler = debounce(updateHeaderPositions, 250);
        window.addEventListener('resize', optimizedResizeHandler, eventOptions);

        // Initial update
        updateActiveSection();

        console.log('Fallback scroll-based active highlighting initialized');

      } catch (error) {
        console.error('Error initializing fallback highlighting:', error);
      }
    }
</script>

    </aside>
    <main class="post-main">
      <div class="post-content e-content" itemprop="articleBody">
        <!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2021-02-09-d2lai-exercises-pt3.ipynb
-->

<div class="container" id="notebook-container">
        
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Exercise-setup">Exercise setup<a class="anchor-link" href="#Exercise-setup"> </a></h2>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">tensorflow</span> <span class="k">as</span> <span class="nn">tf</span>

<span class="n">A</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">tf</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">tf</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">A</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;tf.Tensor: shape=(5, 4), dtype=float32, numpy=
array([[ 0.,  1.,  2.,  3.],
       [ 4.,  5.,  6.,  7.],
       [ 8.,  9., 10., 11.],
       [12., 13., 14., 15.],
       [16., 17., 18., 19.]], dtype=float32)&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Problems-and-answers">Problems and answers<a class="anchor-link" href="#Problems-and-answers"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Prove-that-the-transpose-of-a-matrix--A-&#8217;s-transpose-is--A-:--$(A^{T})^T$=$A$.">Prove that the transpose of a matrix  A &#8217;s transpose is  A :  $(A^{T})^T$=$A$.<a class="anchor-link" href="#Prove-that-the-transpose-of-a-matrix--A-&#8217;s-transpose-is--A-:--$(A^{T})^T$=$A$."> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This is straightforward, transposing is basically converting rows to columns and vice-versa, so when done twice we would end up what we started with.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">At</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="n">At</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;tf.Tensor: shape=(4, 5), dtype=float32, numpy=
array([[ 0.,  4.,  8., 12., 16.],
       [ 1.,  5.,  9., 13., 17.],
       [ 2.,  6., 10., 14., 18.],
       [ 3.,  7., 11., 15., 19.]], dtype=float32)&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">At_t</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">At</span><span class="p">)</span>
<span class="n">At_t</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;tf.Tensor: shape=(5, 4), dtype=float32, numpy=
array([[ 0.,  1.,  2.,  3.],
       [ 4.,  5.,  6.,  7.],
       [ 8.,  9., 10., 11.],
       [12., 13., 14., 15.],
       [16., 17., 18., 19.]], dtype=float32)&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">At_t</span> <span class="o">==</span> <span class="n">A</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;tf.Tensor: shape=(5, 4), dtype=bool, numpy=
array([[ True,  True,  True,  True],
       [ True,  True,  True,  True],
       [ True,  True,  True,  True],
       [ True,  True,  True,  True],
       [ True,  True,  True,  True]])&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Show-that-the-sum-of-transposes-is-equal-to-the-transpose-of-a-sum:--$A^T+B^T=(A+B)^T$.">Show that the sum of transposes is equal to the transpose of a sum:  $A^T+B^T=(A+B)^T$.<a class="anchor-link" href="#Show-that-the-sum-of-transposes-is-equal-to-the-transpose-of-a-sum:--$A^T+B^T=(A+B)^T$."> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's consider a second matrix, $B$</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;tf.Tensor: shape=(5, 4), dtype=float32, numpy=
array([[ 7.975751 ,  7.70928  ,  8.388272 , 11.001523 ],
       [ 7.6716766, 11.476339 ,  6.2204466,  5.6182394],
       [ 9.765643 ,  6.7869806,  8.873018 ,  5.6852665],
       [ 8.200825 ,  4.9842663, 11.172729 , 11.063158 ],
       [ 8.75681  ,  8.760315 ,  4.151512 ,  5.0749035]], dtype=float32)&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The transpose would be</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;tf.Tensor: shape=(4, 5), dtype=float32, numpy=
array([[ 7.975751 ,  7.6716766,  9.765643 ,  8.200825 ,  8.75681  ],
       [ 7.70928  , 11.476339 ,  6.7869806,  4.9842663,  8.760315 ],
       [ 8.388272 ,  6.2204466,  8.873018 , 11.172729 ,  4.151512 ],
       [11.001523 ,  5.6182394,  5.6852665, 11.063158 ,  5.0749035]],
      dtype=float32)&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>$A^T+B^T$</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The sum of the transposed matrices would be</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;tf.Tensor: shape=(4, 5), dtype=float32, numpy=
array([[ 7.975751, 11.671677, 17.765644, 20.200825, 24.75681 ],
       [ 8.70928 , 16.47634 , 15.786981, 17.984266, 25.760315],
       [10.388272, 12.220447, 18.873018, 25.17273 , 22.151512],
       [14.001523, 12.618239, 16.685266, 26.063158, 24.074903]],
      dtype=float32)&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>$(A+B)^T$</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The transposed sum would be</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;tf.Tensor: shape=(4, 5), dtype=float32, numpy=
array([[ 7.975751, 11.671677, 17.765644, 20.200825, 24.75681 ],
       [ 8.70928 , 16.47634 , 15.786981, 17.984266, 25.760315],
       [10.388272, 12.220447, 18.873018, 25.17273 , 22.151512],
       [14.001523, 12.618239, 16.685266, 26.063158, 24.074903]],
      dtype=float32)&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>$A^T+B^T == (A+B)^T$ ?</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;tf.Tensor: shape=(4, 5), dtype=bool, numpy=
array([[ True,  True,  True,  True,  True],
       [ True,  True,  True,  True,  True],
       [ True,  True,  True,  True,  True],
       [ True,  True,  True,  True,  True]])&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>All the numbers are equal, we can see that by looking at the results</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Given-any-square-matrix-$A$-,-is--$A+A^T$--always-symmetric?-Why?">Given any square matrix $A$ , is  $A+A^T$  always symmetric? Why?<a class="anchor-link" href="#Given-any-square-matrix-$A$-,-is--$A+A^T$--always-symmetric?-Why?"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's define a square matrix</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;tf.Tensor: shape=(4, 4), dtype=float32, numpy=
array([[ 0.,  1.,  2.,  3.],
       [ 4.,  5.,  6.,  7.],
       [ 8.,  9., 10., 11.],
       [12., 13., 14., 15.]], dtype=float32)&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The tranpose of the same would be</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">At</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="n">At</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;tf.Tensor: shape=(4, 4), dtype=float32, numpy=
array([[ 0.,  4.,  8., 12.],
       [ 1.,  5.,  9., 13.],
       [ 2.,  6., 10., 14.],
       [ 3.,  7., 11., 15.]], dtype=float32)&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The sum of the tensors</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;tf.Tensor: shape=(4, 4), dtype=float32, numpy=
array([[ 0.,  5., 10., 15.],
       [ 5., 10., 15., 20.],
       [10., 15., 20., 25.],
       [15., 20., 25., 30.]], dtype=float32)&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's see if the condition stands</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;tf.Tensor: shape=(4, 4), dtype=bool, numpy=
array([[ True,  True,  True,  True],
       [ True,  True,  True,  True],
       [ True,  True,  True,  True],
       [ True,  True,  True,  True]])&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I guess since we add the rows and columns of the same matrix and its transpose and also since addition is commutative (ie) $A+B = B+A$, all the numbers we add endup becoming equal in terms of their respective positions, so even tranposing the resultant matrix ends up being equal to the former.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Output-of-len(X)-for-tensor-$X$-shaped-(2,-3,-4)-and-does-len(X)-always-correspond-to-the-length-of-a-certain-axis-of-$X$?-What-is-that-axis?">Output of <code>len(X)</code> for tensor $X$ shaped (2, 3, 4) and does <code>len(X)</code> always correspond to the length of a certain axis of $X$? What is that axis?<a class="anchor-link" href="#Output-of-len(X)-for-tensor-$X$-shaped-(2,-3,-4)-and-does-len(X)-always-correspond-to-the-length-of-a-certain-axis-of-$X$?-What-is-that-axis?"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's consider the following as $X$</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;tf.Tensor: shape=(2, 3, 4), dtype=int32, numpy=
array([[[ 0,  1,  2,  3],
        [ 4,  5,  6,  7],
        [ 8,  9, 10, 11]],

       [[12, 13, 14, 15],
        [16, 17, 18, 19],
        [20, 21, 22, 23]]], dtype=int32)&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>2</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can see that the length returns the size of the first axis, let us see if it does the same for the other arbitrary tensors</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;tf.Tensor: shape=(8, 1, 3), dtype=float32, numpy=
array([[[11.439855 ,  5.880226 ,  5.9797716]],

       [[11.37106  ,  5.619686 ,  5.9706793]],

       [[ 6.4085245, 11.867535 ,  4.3086786]],

       [[ 7.1461754,  8.795105 ,  8.864346 ]],

       [[ 9.952526 ,  7.6806755,  7.7797728]],

       [[10.933958 , 11.748696 ,  6.464444 ]],

       [[ 5.296891 ,  6.7806816,  4.316203 ]],

       [[ 8.316187 ,  7.272793 ,  9.020613 ]]], dtype=float32)&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>8</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;tf.Tensor: shape=(1, 2, 3, 9), dtype=float32, numpy=
array([[[[ 5.9411087,  6.242239 ,  4.4269447,  7.913884 ,  7.8960876,
           7.511854 ,  6.3407526, 11.290615 ,  4.5310717],
         [ 7.182088 ,  5.086608 ,  4.0900164,  4.7155457,  8.863187 ,
           4.1158237, 10.514992 ,  9.662274 ,  8.8960705],
         [11.142818 ,  6.125886 ,  9.6489105,  7.8091097,  9.66531  ,
           9.282991 ,  8.218669 , 11.877634 ,  8.727693 ]],

        [[ 4.3840303,  8.792656 ,  9.48595  ,  9.231619 ,  5.972165 ,
          11.478173 , 10.220118 , 10.394747 ,  4.430291 ],
         [ 7.198678 ,  7.2096577,  5.8975067,  4.6933975,  6.6245346,
          11.958464 , 10.320432 , 11.609855 ,  7.1605587],
         [ 6.389407 ,  5.9069185,  7.974592 ,  5.289855 ,  5.713969 ,
           6.6944523,  4.1094055,  4.077242 ,  8.026564 ]]]],
      dtype=float32)&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>1</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>No matter what the shape of the tensor <code>len</code> always picks the first/outermost axis.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="What-happens-when-we-divide-$A$-by-the-sum-of-it's-second-axis?-A-/-A.sum(axis=1)">What happens when we divide $A$ by the sum of it's second axis? <code>A / A.sum(axis=1)</code><a class="anchor-link" href="#What-happens-when-we-divide-$A$-by-the-sum-of-it's-second-axis?-A-/-A.sum(axis=1)"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's define $A$</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;tf.Tensor: shape=(5, 4), dtype=float32, numpy=
array([[ 0.,  1.,  2.,  3.],
       [ 4.,  5.,  6.,  7.],
       [ 8.,  9., 10., 11.],
       [12., 13., 14., 15.],
       [16., 17., 18., 19.]], dtype=float32)&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">A</span> <span class="o">/</span> <span class="n">tf</span><span class="o">.</span><span class="n">reduce_sum</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># This produces an error</span>
</pre></div>

    </div>
</div>
</div>
<details class="description">
      <summary class="btn btn-sm" data-open="Hide Output" data-close="Show Output"></summary>
        <p>
<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-intense-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-intense-fg ansi-bold">InvalidArgumentError</span>                      Traceback (most recent call last)
<span class="ansi-green-intense-fg ansi-bold">&lt;ipython-input-4-0f11f2009278&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">      1</span> <span class="ansi-red-intense-fg ansi-bold">#collapse</span>
<span class="ansi-green-intense-fg ansi-bold">----&gt; 2</span><span class="ansi-yellow-intense-fg ansi-bold"> </span>A <span class="ansi-yellow-intense-fg ansi-bold">/</span> tf<span class="ansi-yellow-intense-fg ansi-bold">.</span>reduce_sum<span class="ansi-yellow-intense-fg ansi-bold">(</span>A<span class="ansi-yellow-intense-fg ansi-bold">,</span> axis<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-cyan-intense-fg ansi-bold">1</span><span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">      3</span> <span class="ansi-red-intense-fg ansi-bold"># This produces an error</span>

<span class="ansi-green-intense-fg ansi-bold">~\miniconda3\envs\tensor_env\lib\site-packages\tensorflow\python\ops\math_ops.py</span> in <span class="ansi-cyan-fg">binary_op_wrapper</span><span class="ansi-blue-intense-fg ansi-bold">(x, y)</span>
<span class="ansi-green-fg">   1123</span>     <span class="ansi-green-intense-fg ansi-bold">with</span> ops<span class="ansi-yellow-intense-fg ansi-bold">.</span>name_scope<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-green-intense-fg ansi-bold">None</span><span class="ansi-yellow-intense-fg ansi-bold">,</span> op_name<span class="ansi-yellow-intense-fg ansi-bold">,</span> <span class="ansi-yellow-intense-fg ansi-bold">[</span>x<span class="ansi-yellow-intense-fg ansi-bold">,</span> y<span class="ansi-yellow-intense-fg ansi-bold">]</span><span class="ansi-yellow-intense-fg ansi-bold">)</span> <span class="ansi-green-intense-fg ansi-bold">as</span> name<span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-fg">   1124</span>       <span class="ansi-green-intense-fg ansi-bold">try</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-intense-fg ansi-bold">-&gt; 1125</span><span class="ansi-yellow-intense-fg ansi-bold">         </span><span class="ansi-green-intense-fg ansi-bold">return</span> func<span class="ansi-yellow-intense-fg ansi-bold">(</span>x<span class="ansi-yellow-intense-fg ansi-bold">,</span> y<span class="ansi-yellow-intense-fg ansi-bold">,</span> name<span class="ansi-yellow-intense-fg ansi-bold">=</span>name<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">   1126</span>       <span class="ansi-green-intense-fg ansi-bold">except</span> <span class="ansi-yellow-intense-fg ansi-bold">(</span>TypeError<span class="ansi-yellow-intense-fg ansi-bold">,</span> ValueError<span class="ansi-yellow-intense-fg ansi-bold">)</span> <span class="ansi-green-intense-fg ansi-bold">as</span> e<span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-fg">   1127</span>         <span class="ansi-red-intense-fg ansi-bold"># Even if dispatching the op failed, the RHS may be a tensor aware</span>

<span class="ansi-green-intense-fg ansi-bold">~\miniconda3\envs\tensor_env\lib\site-packages\tensorflow\python\util\dispatch.py</span> in <span class="ansi-cyan-fg">wrapper</span><span class="ansi-blue-intense-fg ansi-bold">(*args, **kwargs)</span>
<span class="ansi-green-fg">    199</span>     <span class="ansi-blue-intense-fg ansi-bold">&#34;&#34;&#34;Call target, and fall back on dispatchers if there is a TypeError.&#34;&#34;&#34;</span>
<span class="ansi-green-fg">    200</span>     <span class="ansi-green-intense-fg ansi-bold">try</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-intense-fg ansi-bold">--&gt; 201</span><span class="ansi-yellow-intense-fg ansi-bold">       </span><span class="ansi-green-intense-fg ansi-bold">return</span> target<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-yellow-intense-fg ansi-bold">*</span>args<span class="ansi-yellow-intense-fg ansi-bold">,</span> <span class="ansi-yellow-intense-fg ansi-bold">**</span>kwargs<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">    202</span>     <span class="ansi-green-intense-fg ansi-bold">except</span> <span class="ansi-yellow-intense-fg ansi-bold">(</span>TypeError<span class="ansi-yellow-intense-fg ansi-bold">,</span> ValueError<span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-fg">    203</span>       <span class="ansi-red-intense-fg ansi-bold"># Note: convert_to_eager_tensor currently raises a ValueError, not a</span>

<span class="ansi-green-intense-fg ansi-bold">~\miniconda3\envs\tensor_env\lib\site-packages\tensorflow\python\ops\math_ops.py</span> in <span class="ansi-cyan-fg">truediv</span><span class="ansi-blue-intense-fg ansi-bold">(x, y, name)</span>
<span class="ansi-green-fg">   1295</span>     TypeError<span class="ansi-yellow-intense-fg ansi-bold">:</span> If<span class="ansi-red-fg"> </span><span class="ansi-red-fg">`</span>x<span class="ansi-red-fg">`</span> <span class="ansi-green-intense-fg ansi-bold">and</span><span class="ansi-red-fg"> </span><span class="ansi-red-fg">`</span>y<span class="ansi-red-fg">`</span> have different dtypes<span class="ansi-yellow-intense-fg ansi-bold">.</span>
<span class="ansi-green-fg">   1296</span>   &#34;&#34;&#34;
<span class="ansi-green-intense-fg ansi-bold">-&gt; 1297</span><span class="ansi-yellow-intense-fg ansi-bold">   </span><span class="ansi-green-intense-fg ansi-bold">return</span> _truediv_python3<span class="ansi-yellow-intense-fg ansi-bold">(</span>x<span class="ansi-yellow-intense-fg ansi-bold">,</span> y<span class="ansi-yellow-intense-fg ansi-bold">,</span> name<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">   1298</span> 
<span class="ansi-green-fg">   1299</span> 

<span class="ansi-green-intense-fg ansi-bold">~\miniconda3\envs\tensor_env\lib\site-packages\tensorflow\python\ops\math_ops.py</span> in <span class="ansi-cyan-fg">_truediv_python3</span><span class="ansi-blue-intense-fg ansi-bold">(x, y, name)</span>
<span class="ansi-green-fg">   1234</span>       x <span class="ansi-yellow-intense-fg ansi-bold">=</span> cast<span class="ansi-yellow-intense-fg ansi-bold">(</span>x<span class="ansi-yellow-intense-fg ansi-bold">,</span> dtype<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">   1235</span>       y <span class="ansi-yellow-intense-fg ansi-bold">=</span> cast<span class="ansi-yellow-intense-fg ansi-bold">(</span>y<span class="ansi-yellow-intense-fg ansi-bold">,</span> dtype<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-intense-fg ansi-bold">-&gt; 1236</span><span class="ansi-yellow-intense-fg ansi-bold">     </span><span class="ansi-green-intense-fg ansi-bold">return</span> gen_math_ops<span class="ansi-yellow-intense-fg ansi-bold">.</span>real_div<span class="ansi-yellow-intense-fg ansi-bold">(</span>x<span class="ansi-yellow-intense-fg ansi-bold">,</span> y<span class="ansi-yellow-intense-fg ansi-bold">,</span> name<span class="ansi-yellow-intense-fg ansi-bold">=</span>name<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">   1237</span> 
<span class="ansi-green-fg">   1238</span> 

<span class="ansi-green-intense-fg ansi-bold">~\miniconda3\envs\tensor_env\lib\site-packages\tensorflow\python\ops\gen_math_ops.py</span> in <span class="ansi-cyan-fg">real_div</span><span class="ansi-blue-intense-fg ansi-bold">(x, y, name)</span>
<span class="ansi-green-fg">   7440</span>       <span class="ansi-green-intense-fg ansi-bold">return</span> _result
<span class="ansi-green-fg">   7441</span>     <span class="ansi-green-intense-fg ansi-bold">except</span> _core<span class="ansi-yellow-intense-fg ansi-bold">.</span>_NotOkStatusException <span class="ansi-green-intense-fg ansi-bold">as</span> e<span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-intense-fg ansi-bold">-&gt; 7442</span><span class="ansi-yellow-intense-fg ansi-bold">       </span>_ops<span class="ansi-yellow-intense-fg ansi-bold">.</span>raise_from_not_ok_status<span class="ansi-yellow-intense-fg ansi-bold">(</span>e<span class="ansi-yellow-intense-fg ansi-bold">,</span> name<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">   7443</span>     <span class="ansi-green-intense-fg ansi-bold">except</span> _core<span class="ansi-yellow-intense-fg ansi-bold">.</span>_FallbackException<span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-fg">   7444</span>       <span class="ansi-green-intense-fg ansi-bold">pass</span>

<span class="ansi-green-intense-fg ansi-bold">~\miniconda3\envs\tensor_env\lib\site-packages\tensorflow\python\framework\ops.py</span> in <span class="ansi-cyan-fg">raise_from_not_ok_status</span><span class="ansi-blue-intense-fg ansi-bold">(e, name)</span>
<span class="ansi-green-fg">   6841</span>   message <span class="ansi-yellow-intense-fg ansi-bold">=</span> e<span class="ansi-yellow-intense-fg ansi-bold">.</span>message <span class="ansi-yellow-intense-fg ansi-bold">+</span> <span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-blue-intense-fg ansi-bold">&#34; name: &#34;</span> <span class="ansi-yellow-intense-fg ansi-bold">+</span> name <span class="ansi-green-intense-fg ansi-bold">if</span> name <span class="ansi-green-intense-fg ansi-bold">is</span> <span class="ansi-green-intense-fg ansi-bold">not</span> <span class="ansi-green-intense-fg ansi-bold">None</span> <span class="ansi-green-intense-fg ansi-bold">else</span> <span class="ansi-blue-intense-fg ansi-bold">&#34;&#34;</span><span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">   6842</span>   <span class="ansi-red-intense-fg ansi-bold"># pylint: disable=protected-access</span>
<span class="ansi-green-intense-fg ansi-bold">-&gt; 6843</span><span class="ansi-yellow-intense-fg ansi-bold">   </span>six<span class="ansi-yellow-intense-fg ansi-bold">.</span>raise_from<span class="ansi-yellow-intense-fg ansi-bold">(</span>core<span class="ansi-yellow-intense-fg ansi-bold">.</span>_status_to_exception<span class="ansi-yellow-intense-fg ansi-bold">(</span>e<span class="ansi-yellow-intense-fg ansi-bold">.</span>code<span class="ansi-yellow-intense-fg ansi-bold">,</span> message<span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">,</span> <span class="ansi-green-intense-fg ansi-bold">None</span><span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">   6844</span>   <span class="ansi-red-intense-fg ansi-bold"># pylint: enable=protected-access</span>
<span class="ansi-green-fg">   6845</span> 

<span class="ansi-green-intense-fg ansi-bold">~\miniconda3\envs\tensor_env\lib\site-packages\six.py</span> in <span class="ansi-cyan-fg">raise_from</span><span class="ansi-blue-intense-fg ansi-bold">(value, from_value)</span>

<span class="ansi-red-intense-fg ansi-bold">InvalidArgumentError</span>: Incompatible shapes: [5,4] vs. [5] [Op:RealDiv]</pre>
</div>
</div>

</div>
</div>
</p>
    </details>
</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Ok, there seems to be shape inconsistencies to the resultant sum tensor. Let's see the sum output for the axes in tensor.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tf</span><span class="o">.</span><span class="n">reduce_sum</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;tf.Tensor: shape=(5,), dtype=float32, numpy=array([ 6., 22., 38., 54., 70.], dtype=float32)&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tf</span><span class="o">.</span><span class="n">reduce_sum</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;tf.Tensor: shape=(4,), dtype=float32, numpy=array([40., 45., 50., 55.], dtype=float32)&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>So I think, When we sum a tensor on a particular axis, the shape of the resultant tensor will end taking the shape with the other remaining axes, for example a tensor with shape <code>(5, 4 ,3)</code> when summed up along the third axis <code>(2)</code> the resultant tensor would be of shape <code>(5, 4)</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The shapes for the tensors summed along the rest of the axes can be understood by the same.</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

<span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">:</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">:</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">axis</span> <span class="o">=</span> <span class="mi">2</span> <span class="p">:</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>When we do the division with the other resultant tensor, we can easily divide with it since the shapes follow the broadcasting rules</p>
<div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">-</span> <span class="mi">5</span> <span class="n">X</span> <span class="mi">4</span>
<span class="n">summed_a</span> <span class="o">-</span>     <span class="mi">4</span> 
<span class="n">result</span>   <span class="o">-</span> <span class="mi">5</span> <span class="n">X</span> <span class="mi">4</span>
</pre></div>
<p>The following is the result of the division</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;tf.Tensor: shape=(5, 4), dtype=float32, numpy=
array([[0.        , 0.02222222, 0.04      , 0.05454545],
       [0.1       , 0.11111111, 0.12      , 0.12727273],
       [0.2       , 0.2       , 0.2       , 0.2       ],
       [0.3       , 0.2888889 , 0.28      , 0.27272728],
       [0.4       , 0.37777779, 0.36      , 0.34545454]], dtype=float32)&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A fellow learner suggested to reframe the question <a href="https://discuss.d2l.ai/t/linear-algebra/196/7?u=manimaran_p">here</a>, and said that the following code is what would have been expected by the one who framed the question.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">A</span> <span class="o">/</span> <span class="n">tf</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">tf</span><span class="o">.</span><span class="n">reduce_sum</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">),(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;tf.Tensor: shape=(5, 4), dtype=float32, numpy=
array([[0.        , 0.16666667, 0.33333334, 0.5       ],
       [0.18181819, 0.22727273, 0.27272728, 0.3181818 ],
       [0.21052632, 0.23684211, 0.2631579 , 0.28947368],
       [0.22222222, 0.24074075, 0.25925925, 0.2777778 ],
       [0.22857143, 0.24285714, 0.25714287, 0.27142859]], dtype=float32)&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's see the shapes and values of the numerator and denominator of the above</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Numerator:  (5, 4)
Denominator: (5, 1)
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tf</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">tf</span><span class="o">.</span><span class="n">reduce_sum</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">),(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)),</span> <span class="n">A</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(&lt;tf.Tensor: shape=(5, 1), dtype=float32, numpy=
 array([[ 6.],
        [22.],
        [38.],
        [54.],
        [70.]], dtype=float32)&gt;,
 &lt;tf.Tensor: shape=(5, 4), dtype=float32, numpy=
 array([[ 0.,  1.,  2.,  3.],
        [ 4.,  5.,  6.,  7.],
        [ 8.,  9., 10., 11.],
        [12., 13., 14., 15.],
        [16., 17., 18., 19.]], dtype=float32)&gt;)</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>So if we compare the values, each value in <code>A</code> has been divided by the summation of each of it's rows</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="When-traveling-between-two-points-in-Manhattan,-what-is-the-distance-that-you-need-to-cover-in-terms-of-the-coordinates,-i.e.,-in-terms-of-avenues-and-streets?-Can-you-travel-diagonally?">When traveling between two points in Manhattan, what is the distance that you need to cover in terms of the coordinates, i.e., in terms of avenues and streets? Can you travel diagonally?<a class="anchor-link" href="#When-traveling-between-two-points-in-Manhattan,-what-is-the-distance-that-you-need-to-cover-in-terms-of-the-coordinates,-i.e.,-in-terms-of-avenues-and-streets?-Can-you-travel-diagonally?"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A user <a href="https://discuss.d2l.ai/t/linear-algebra/30/7">suggested</a> to look at the streets of manhattan in google maps, to understand the question better,! as suggested the maps picture looked like a big piece of land cut into several small rectangular boxes, very much like 2d coordinate space, where each intersection of street can be treated as an point in that space.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's look at sample screenshot from google maps of manhattan streets.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><figure>
  
    <img class="docimage" src="/Blog-Posts/images/copied_from_nb/../images/manhattan.png" alt="" />
    
    
</figure>
</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The question asks us to find the distance that we need to cover if we need to go from one point to another in terms of streets and avenues.<br />
Looks like there is a formula called <code>Manhattan distance</code> for a reason!</p>
<blockquote><p>The distance between two points measured along axes at right angles. In a plane with p1 at (x1, y1) and p2 at (x2, y2), it is |x1 - x2| + |y1 - y2|.
<sub>referred from <a href="https://xlinux.nist.gov/dads/HTML/manhattanDistance.html">here</a></sub>
and there is also a special geometry called taxicab geometry, with manhattan distance as its metric, there are some good images and content to understand better <a href="https://study.com/academy/lesson/taxicab-geometry-history-formula.html">here</a></p>
</blockquote>
<p>if we need to measure the distance in terms of streets and avenues, we need to consider them as dimensions (x(street),y(avenues)), let us consider that we are in the metro point in <strong>72nd</strong> street and we need to go to the Jones Wood Foundry in <strong>76th</strong> street.</p>
<p>Let's define them as coordinates,<br />
72nd street, 2nd Avenue -&gt; $(72, 2)$<br />
76th street, 1st Avenue -&gt; $(76, 1)$</p>
<p>so according to the formula the answer would be $(4, 1)$ ie 4 streets and 1 avenue, and we don't travel diagonally unless we are flying.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="The-summation-outputs-for-tensor-with-shape-(2,-3,-4)-along-axis-0,-1,-and-2.">The summation outputs for tensor with shape (2, 3, 4) along axis 0, 1, and 2.<a class="anchor-link" href="#The-summation-outputs-for-tensor-with-shape-(2,-3,-4)-along-axis-0,-1,-and-2."> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I think I have answered this in the question about <code>A / A.sum(axis=1)</code>, that should apply to the any arbitrary shape, for this one it would turnout to be the following</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

<span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">:</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">:</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">axis</span> <span class="o">=</span> <span class="mi">2</span> <span class="p">:</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Feed-a-tensor-with-3-or-more-axes-to-the-linalg.norm.">Feed a tensor with 3 or more axes to the <code>linalg.norm</code>.<a class="anchor-link" href="#Feed-a-tensor-with-3-or-more-axes-to-the-linalg.norm."> </a></h3><h3 id="What-does-this-function-compute-for-tensors-of-arbitrary-shape?">What does this function compute for tensors of arbitrary shape?<a class="anchor-link" href="#What-does-this-function-compute-for-tensors-of-arbitrary-shape?"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's take a 3-d tensor</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;tf.Tensor: shape=(2, 2, 5), dtype=float32, numpy=
array([[[ 0.,  1.,  2.,  3.,  4.],
        [ 5.,  6.,  7.,  8.,  9.]],

       [[10., 11., 12., 13., 14.],
        [15., 16., 17., 18., 19.]]], dtype=float32)&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tf</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;tf.Tensor: shape=(), dtype=float32, numpy=49.699093&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's take an arbitrary shaped tensor</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;tf.Tensor: shape=(8, 1, 2, 5), dtype=float32, numpy=
array([[[[ 0.,  1.,  2.,  3.,  4.],
         [ 5.,  6.,  7.,  8.,  9.]]],


       [[[10., 11., 12., 13., 14.],
         [15., 16., 17., 18., 19.]]],


       [[[20., 21., 22., 23., 24.],
         [25., 26., 27., 28., 29.]]],


       [[[30., 31., 32., 33., 34.],
         [35., 36., 37., 38., 39.]]],


       [[[40., 41., 42., 43., 44.],
         [45., 46., 47., 48., 49.]]],


       [[[50., 51., 52., 53., 54.],
         [55., 56., 57., 58., 59.]]],


       [[[60., 61., 62., 63., 64.],
         [65., 66., 67., 68., 69.]]],


       [[[70., 71., 72., 73., 74.],
         [75., 76., 77., 78., 79.]]]], dtype=float32)&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tf</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;tf.Tensor: shape=(), dtype=float32, numpy=409.2432&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>tf.norm</code> still calculates the square root of squared sum of all numbers in the tensor, equivalent to the following</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tf</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span>
    <span class="nb">float</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span>
        <span class="p">[</span><span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">80</span><span class="p">)]</span>
        <span class="p">))</span>
    <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;tf.Tensor: shape=(), dtype=float32, numpy=409.2432&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I am not sure if there was any change of behaviour expected in this, so I should try using <code>mxnet</code> to see if there is a difference in the above calculation of l2 norm.</p>

</div>
</div>
</div>
</div>



      </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="mani2106/Blog-Posts"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/Blog-Posts/d2l.ai-exercises/deep-learning/tensorflow/2021/02/09/d2lai-exercises-pt3.html" hidden></a>
    </main>
  </div>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/Blog-Posts/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/Blog-Posts/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/Blog-Posts/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
        <ul class="contact-list">
          <li class="p-name">Manimaran Panneerselvam</li>
          <li><a class="u-email" href="mailto:manimaran_p@outlook.com">manimaran_p@outlook.com</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <p>This is where I write about my work on data science. I will also post Notebooks and sample codes to solve some interesting problems that I face everyday.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/mani2106" target="_blank" title="mani2106"><svg class="svg-icon grey"><use xlink:href="/Blog-Posts/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://www.linkedin.com/in/manimaran-p" target="_blank" title="manimaran-p"><svg class="svg-icon grey"><use xlink:href="/Blog-Posts/assets/minima-social-icons.svg#linkedin"></use></svg></a></li><li><a rel="me" href="https://twitter.com/mani_maranp" target="_blank" title="mani_maranp"><svg class="svg-icon grey"><use xlink:href="/Blog-Posts/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
